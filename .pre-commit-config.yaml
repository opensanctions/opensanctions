repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: check-yaml
      - id: trailing-whitespace
      - id: check-merge-conflict
  - repo: local
    hooks:
      - id: forbid-yaml-extension
        name: Forbid .yaml files (use .yml instead)
        entry: '.yaml files are not allowed. Please use .yml extension instead.'
        language: fail
        files: 'datasets/.*\.yaml$'
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.13.0
    hooks:
      - id: ruff-check
        args: ['--select', 'I', '--fix']
      - id: ruff-format
  - repo: https://github.com/adrienverge/yamllint.git
    rev: v1.37.1
    hooks:
      - id: yamllint
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.18.1
    hooks:
      - id: mypy
        # Don't run isolated but use the activated venv. Not perfect but better than re-declaring all deps here
        language: system
        exclude: '^datasets|^zavod/zavod/tests'
        args: ['--strict']
  - repo: local
    hooks:
      - id: nextjs-lint
        name: Next.js ESLint
        entry: bash -c "cd ui && npx next lint --fix"
        language: system
        files: '^ui/'
        pass_filenames_to_command: false
